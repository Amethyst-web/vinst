<div class="row" data-step-id="shipping">
    {$external_methods = []}
    {foreach $checkout_shipping_methods as $m}
        <div class="col-xs-12 col-sm-6 shipping-{$m.id}">
            <fieldset class="shipping-method">
                <legend>
                    <label>
                        <input type="radio" name="shipping_id" value="{$m.id}" {if $m.external || !empty($m.error)}disabled{/if} {if $m.id == $shipping.id}checked{/if}>{$m.name|escape}
                        <span class="price nowrap">
                            {if $m.rate !== null}
                                ({shop_currency_html($m.rate, $m.currency)})
                            {elseif $m.external}
                                {$external_methods[] = $m.id}
                                [`Loading...`] <i class="icon16 loading"></i>
                            {/if}
                        </span>
                    </label>
                </legend>
                <p class="description">{$m.description}</p>
                {if empty($m.error) && !empty($m.rates)}
                    {if count($m.rates) > 1}
                        <select class="shipping-rates" name="rate_id[{$m.id}]">
                            {foreach $m.rates as $rate_id => $r}
                            <option data-rate="{shop_currency($r.rate, $r.currency)}" {if !empty($r.est_delivery)}data-est_delivery="{$r.est_delivery}"{/if} {if !empty($r.comment)}data-comment="{$r.comment}"{/if} value="{$rate_id}"{if $rate_id == $shipping.rate_id} selected{/if}>{$r.name} ({shop_currency($r.rate, $r.currency)})</option>
                            {/foreach}
                        </select>
                    {else}
                        <input type="hidden" name="rate_id[{$m.id}]" value="{key($m.rates)}">
                    {/if}
                {/if}
                <span class="hint" {if empty($m.est_delivery)}style="display:none"{/if}>
                    [`Estimated delivery`]:<br>
                    <strong class="est_delivery">{if !empty($m.est_delivery)}{$m.est_delivery}{/if}</strong>
                </span>
            </fieldset>
        </div>
    {/foreach}
</div>